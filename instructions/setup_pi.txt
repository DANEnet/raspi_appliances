# Of course to be here you need to have imaged the pi 
# and done
# git clone https://github.com/DANEnet/server_monitor.git
# and maybe run raspi-config 

#instructions to setup pi
#after http://jartweb.net/blog/wp-content/uploads/2013/12/Raspberry-Pi-Logger-with-LCD.pdf
#
# change hostname
#nano /etc/hostname
#
#change pi password
#passwd
#
#set up static IP
#make a new user (not pi)


apt-get --purge remove sonic-pi
apt-get --purge remove minecraft
deborphan -sz  # see what is orphaned
apt-get remove --purge $(deborphan)
apt-get update && sudo apt-get upgrade

apt-get install apache2
apt-get install python-matplotlib
apt-get install python-rpi.gpio
apt-get install owfs ow-shell i2c-tools  # includes w1-therm


# DATED****
# modules for etc/modules
#  snd-bcm2835
#  w1-gpio
#  w1-therm
# reboot and use
# lsmod  # should show these modules IF THE SENSORS ARE CONNECTED

# The device tree way. needed with newer kernals
# http://www.raspberrypi.org/forums/viewtopic.php?f=29&t=97216
# add to /boot/config.txt
# add dtoverlay=w1-gpio,gpiopin=4
# This did NOT work
#   device_tree=bcm2708-rpi-b.dtb
#   device_tree_overlay=overlays/w1-gpio-overlay.dtb
#   device_tree_overlay=overlays/w1-gpio-pullup-overlay.dtb
#  At least with the dtoverlay=w1-gpio,gpiopin=4




# Try this from command line
#    #   echo 7 > /sys/class/gpio/export
#    #   echo high > /sys/class/gpio/gpio7/direction

### or from python 
#    import RPi.GPIO as GPIO
#    GPIO.setmode(GPIO.BCM)
#    GPIO.setup(23, GPIO.IN, pull_up_down = GPIO.PUD_DOWN)
#    GPIO.setup(24, GPIO.IN, pull_up_down = GPIO.PUD_UP)
#
#    This will enable a pull-down resistor on pin 23, and a pull-up resistor on pin 24. 



# for moving the onewire pin
# add to /boot/config.txt
# bcm2708.w1_gpio_pin=8
# as well as changing the dtoverlay pin

=======
# Try this from command line
#   echo 7 > /sys/class/gpio/export
#   echo high > /sys/class/gpio/gpio7/direction 
>>>>>>> External Changes


#Add this into /etc/rc.local
#
#FILE = /home/pi/server_monitor/working/server_monitor.sh
#echo "Starting server_monitor"
#if [-f $FILE]
#	echo "Starting server_monitor ($FILE)"
#	$FILE &
#else
#	echo "Did not find $FILE"
#fi

## if the sensor uses i2c connection needs
# nano /etc/modules
# sudo -s
# i2cdetect -y 0


